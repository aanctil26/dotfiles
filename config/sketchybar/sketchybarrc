PLUGIN_DIR="$HOME/.config/sketchybar/plugins"
ITEM_DIR="$HOME/.config/sketchybar/items"

source $HOME/.config/sketchybar/colors.sh
source $HOME/.config/sketchybar/icons.sh

export FONT="JetBrains Mono"
export NERD_FONT="JetBrains Mono"

sketchybar --bar height=43\
                 blur_radius=100  \
                 position=top     \
                 padding_left=20  \
                 padding_right=20 \
                 color=0x15ffffff \
                 shadow=on

sketchybar --default updates=when_shown                       \
                     drawing=on                               \
                     icon.font="$NERD_FONT:Regular:14.0"      \
                     icon.color=0xffffffff                    \
                     label.font="$FONT:Light:14.0"            \
                     label.color=0xffffffff                   \
                     label.padding_left=4                     \
                     label.padding_right=4                    \
                     icon.padding_left=4                      \
                     icon.padding_right=4


sketchybar --add event aerospace_workspace_change

# Create all workspace items 1-8 (always present, no dynamic hiding)
for sid in {1..8}; do
  sketchybar --add item space.$sid left                \
             --subscribe space.$sid aerospace_workspace_change front_app_switched \
             --set space.$sid                             \
                icon="$sid"                               \
                icon.font="$NERD_FONT:Regular:14.0"      \
                icon.color=0xffffffff                    \
                icon.padding_left=8                      \
                icon.padding_right=8                     \
                background.padding_left=5                \
                background.padding_right=5               \
                background.color=0x44ffffff              \
                background.corner_radius=5               \
                background.height=22                     \
                background.drawing=off                   \
                label.drawing=off                        \
                updates=on                               \
                click_script="aerospace workspace $sid"  \
                script="$HOME/.config/sketchybar/plugins/aerospace_simple.sh $sid"
done

source $ITEM_DIR/spotify.sh
source $ITEM_DIR/window_title.sh
source $ITEM_DIR/clock.sh
source $ITEM_DIR/battery.sh
source $ITEM_DIR/volume.sh
source $ITEM_DIR/cpu.sh


sketchybar --update

echo "sketchybar configuration loaded.."
